# ==============================================================================
# platform-config.yaml - General Platform Settings
# This file defines shared settings for all applications on the platform
# ==============================================================================
# ğŸ“ Note: This is a guidance/documentation file - not used directly in Helm Chart
# Purpose: Help developers understand the standard platform settings
# ğŸ”§ Change! - Update details according to your platform
# ==============================================================================

platform:
  name: "weaversoft-platform"  # ğŸ”§ Change! - Platform name
  
  # Registry settings - where Docker images and Charts are stored
  registry:
    url: "registry.example.com"  # ğŸ”§ Must change! - Registry address (e.g., "registry.company.com")
    org: "dcs"  # ğŸ”§ Change! - Organization/namespace in Registry (e.g., "company", "my-team")
    chart_repo: "charts"  # ğŸ”§ Optional - OCI Helm repository (if using Helm OCI registry)
  
  # Tagging Strategy
  tagging:
    strategy: "git-sha"  # ğŸ”§ Change! - How to tag images:
      # "git-sha" = commit SHA (e.g., "abc1234") - recommended!
      # "semver" = semantic versioning (e.g., "v1.2.3")
      # "datetime" = timestamp (e.g., "20240101120000")
    latestAlias: true  # âœ… Whether to create "latest" tag in addition (recommended for staging)

  # Conventions - standard platform settings
  conventions:
    managedByLabel: "weaversoft-platform"  # âœ… Don't change - Label identifying that app is managed by platform
    ownerDefault: "default"  # ğŸ”§ Change! - Default owner (if not set)
    serviceExposeAnnotation: "expose"  # âœ… Don't change - Kyverno looks for this annotation to create HTTPRoute
      # Kyverno looks for expose: "true" in Service to create HTTPRoute automatically
      # HTTPRoute is the modern Gateway API replacement for the legacy Ingress resource
    
    # Gateway settings - how Kyverno creates HTTPRoute for NGINX Gateway Fabric
  gateway:
    name: "dcs-gateway-fabric"   # âœ… Do NOT change - fixed for all platform apps
    namespace: "nginx-gateway"   # âœ… Do NOT change - fixed namespace for Gateway Fabric
    tls: true                    # âœ… Default: true (cluster-wide TLS managed by NGINX Gateway Fabric)
    
  ingressLabels:
    enabledKey: "dcs.ingress/enabled"  # (Not used in this cluster) - Kyverno uses annotation 'expose: true' instead
    hostKey: "dcs.ingress/host"        # (For documentation only)
    pathKey: "dcs.ingress/path"        # (For documentation only)

  # Default settings - recommended values to use
  defaults:
    service:
      type: "ClusterIP"  # âœ… Default - internal Service (usually no need to change)
      port: 80  # ğŸ”§ Default - update according to your application (3000, 8080, etc.)
    
    # Default security settings
    security:
      runAsUser: 10001  # âœ… UID of non-root user (recommended not to change)
      runAsGroup: 10001  # âœ… GID of non-root group (recommended not to change)
      fsGroup: 10001  # âœ… GID for volumes (recommended not to change)

# ğŸ“ Note: This file is not loaded automatically - this is a guidance file
# Use the values here in your application's values.yaml
